<!DOCTYPE html>
<html lang="en-US">
<head>
  <link rel="stylesheet" type="text/css" href="styles/main.css">
  <script src="https://ajax.googleapis.com/ajax/libs/angularjs/1.6.9/angular.min.js"></script>
  <script src="modules/courses.js"></script>
  <script src="controllers/courseController.js"></script>
  <script src="env.js"></script>
</head>
<body>

  <div ng-app="courses" ng-controller="courseController">
      <div ng-repeat="course in courses" style="clear:left;padding:5px" ng-init="shown = false">
        <span>{{course.courseId}}</span>
        <span ng-click="getCourse(course.courseId);">{{course.name}}</span>
        <span>{{course.holes.length}} Holes</span>
        <span>Par: {{course.par}}</span>
        <span ng-show="!shown">
          <a href="javascript:void(0);" ng-click="shown = true;">Show</a>
        </span>
        <span ng-show="shown">
          <a href="javascript:void(0);" ng-click="shown = false;">Hide</a>
        </span>
        <a href="/rounds?courseId={{course.courseId}}" ng-click="getCourseRounds(course.courseId);">Rounds</a>
        <a href="javascript:void(0);" ng-click="deleteCourse(course.courseId);">Delete</a>
        <div ng-show="shown">
          <table class="courseTable">
            <tr class="hole"><td>Hole</td><td ng-repeat="hole in course.holes">{{hole.holeNumber}}</td><td></td><td>OUT</td></tr>
            <tr class="par"><td>Par</td><td ng-repeat="hole in course.holes">{{hole.par}}</td><td></td><td>{{course.par}}</td></tr>
            <tr class="yards"><td>Yards</td><td ng-repeat="hole in course.holes">{{hole.yards}}</td><td></td><td>{{course.totalYards}}</td></tr>
          </table>
        </div>
      </div>
      <span ng-init="createNew = false" ng-hide="createNew"><input type="button" value="New" ng-click="createNew = true"/></span>
      <div ng-show="createNew">
        <span>
          <select ng-model="courseType" ng-options="x.name for x in courseTypes" ng-change="initNewCourseHoles()">
        </span>
        <div>
          <span></span>
          <span>Name: <input ng-model="newCourse.name" type="text"/></span>
          <span>{{courseType.name}}</span>
          <div>
            <table class="courseTable">
              <tr class="hole">
                <td>Hole</td>
                <td ng-repeat="hole in newCourse.holes">
                  <input ng-model="hole.holeNumber" type="hidden"/>{{hole.holeNumber}}
                </td>
                <td></td><td></td>
              </tr>
              <tr class="par">
                <td>Par</td>
                <td ng-repeat="hole in newCourse.holes">
                  <input ng-model="hole.par" type="text" size="1" maxlength="2"/>
                </td>
                <td></td><td></td>
              </tr>
              <tr class="yards" ng-init="totalYards=0">
                <td>Yards</td>
                <td ng-repeat="hole in newCourse.holes">
                  <input ng-model="hole.yards" type="text" size="1" maxlength="3"/>
                </td>
                <td></td><td></td>
            </table>
          </div>
          <input type="button" value="Save Course" ng-click="saveCourse(newCourse)"/>
          <input type="button" value="Cancel" ng-click="createNew = false"/>
        </div>
      </div>
  </div>
</body>
</html>
